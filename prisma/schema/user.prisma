model User {
  id                       String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                String    @db.Uuid
  name                     String
  login                    String    @unique
  password                 String
  image                    String?
  admin                    Boolean   @default(false)
  owner                    Boolean   @default(false)
  active                   Boolean   @default(true)
  current_token            String?
  token_expires            DateTime?
  pending_password         Boolean   @default(false)
  pending_password_expires DateTime?
  setup_email_sent_at      DateTime?
  reset_password_expires   DateTime?
  reset_password_sent_at   DateTime?
  create_date              DateTime  @default(now())
  last_edit_date           DateTime?
  tenant                   Tenant    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  logs                     Log[]

  creator_id     String? @db.Uuid
  creator        User?   @relation("UserCreator", fields: [creator_id], references: [id], onDelete: SetNull)
  last_editor_id String? @db.Uuid
  last_editor    User?   @relation("UserEditor", fields: [last_editor_id], references: [id], onDelete: SetNull)
  created_users  User[]  @relation("UserCreator")
  edited_users   User[]  @relation("UserEditor")

  created_ingredients              Ingredient[]            @relation("IngredientCreator")
  edited_ingredients               Ingredient[]            @relation("IngredientEditor")
  created_ingredient_costs         IngredientCost[]        @relation("IngredientCostCreator")
  created_packages                 Package[]               @relation("PackageCreator")
  edited_packages                  Package[]               @relation("PackageEditor")
  created_package_costs            PackageCost[]           @relation("PackageCostCreator")
  created_products                 Product[]               @relation("ProductCreator")
  edited_products                  Product[]               @relation("ProductEditor")
  created_sales                    Sale[]                  @relation("SaleCreator")
  edited_sales                     Sale[]                  @relation("SaleEditor")
  created_product_costs            ProductCost[]           @relation("ProductCostCreator")
  created_product_stock_changes    ProductStockChange[]    @relation("ProductStockChangeCreator")
  created_ingredient_stock_changes IngredientStockChange[] @relation("IngredientStockChangeCreator")
  created_package_stock_changes    PackageStockChange[]    @relation("PackageStockChangeCreator")
  created_clients                  Client[]                @relation("ClientCreator")
  edited_clients                   Client[]                @relation("ClientEditor")
  created_client_addresses         ClientAddress[]         @relation("ClientAddressCreator")
  edited_client_addresses          ClientAddress[]         @relation("ClientAddressEditor")

  created_finance_categories FinanceCategory[]      @relation("FinanceCategoryCreator")
  edited_finance_categories  FinanceCategory[]      @relation("FinanceCategoryEditor")
  created_bank_accounts      BankAccount[]          @relation("BankAccountCreator")
  edited_bank_accounts       BankAccount[]          @relation("BankAccountEditor")
  created_bank_transactions  BankTransaction[]      @relation("BankTransactionCreator")
  created_bills              Bill[]                 @relation("BillCreator")
  edited_bills               Bill[]                 @relation("BillEditor")
  created_nfes               Nfe[]                  @relation("NfeCreator")
  edited_nfes                Nfe[]                  @relation("NfeEditor")
  created_unity_of_measures  UnityOfMeasure[]       @relation("UnityOfMeasureCreator")
  edited_unity_of_measures   UnityOfMeasure[]       @relation("UnityOfMeasureEditor")
  created_payment_methods    FinancePaymentMethod[] @relation("FinancePaymentMethodCreator")
  edited_payment_methods     FinancePaymentMethod[] @relation("FinancePaymentMethodEditor")

  @@map("user")
  @@schema("data")
}
